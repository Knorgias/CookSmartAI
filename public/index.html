<!DOCTYPE html>
<html>

  <head>
    <title>Get quotes from OpenAI</title>
    <link rel="stylesheet" href="mystyle.css">
  </head>

  <body>
    <div id="container">
      Main ingredient: <input type="text" id="input">
      <button id="make-request">Give me a recipe</button>
      <div id="response"></div>
    </div>
    <script>
      const button = document.querySelector('#make-request');

      const getQuote = () => {
        const myInput = document.getElementById('input').value;

        const openAiConfig = {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            input: myInput,
          }),
        };

        fetch('/.netlify/functions/openai-api', openAiConfig)
          .then(response => response.text())
          .then(data => {
            const responseDiv = document.getElementById('response');
            responseDiv.innerText = data;
          })
          .catch(error => {
            console.error('Error:', error);
            const responseDiv = document.getElementById('response');
            responseDiv.innerText = 'Hmm, something went wrong.. please try again';
          });
      };
      button.addEventListener('click', getQuote);
    </script>
  </body>

</html>